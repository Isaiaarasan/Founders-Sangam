import{r as l,j as e,v as N,z as m,w as y,G as C,x as b,y as S,b as E,H as c,I as M,J as R,K as A,N as D,O as V,B as P}from"./index-Dsm2NKI-.js";const I=()=>{const[o,g]=l.useState([]),[i,x]=l.useState(""),[n,h]=l.useState("All");l.useEffect(()=>{(async()=>{try{const a=localStorage.getItem("adminToken"),d=await E.get("https://founders-sangam.onrender.com/admin/registrations",{headers:{Authorization:`Bearer ${a}`}});d.data.success&&g(d.data.registrations)}catch{console.error("Failed to fetch registrations")}})()},[]);const p=l.useMemo(()=>{const t=o.map(a=>a.eventId?.title||"Unknown Event");return[...new Set(t)].sort()},[o]),u=l.useMemo(()=>n==="All"?o:o.filter(t=>(t.eventId?.title||"Unknown Event")===n),[o,n]),v=l.useMemo(()=>[{header:"Event",accessorKey:"eventId",cell:t=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-bold text-neutral-900 dark:text-white text-xs",children:t.getValue()?.title||"Unknown Event"}),e.jsx("span",{className:"text-[10px] text-neutral-500",children:t.getValue()?.date?new Date(t.getValue().date).toLocaleDateString():""})]})},{header:"Name",accessorKey:"name",cell:t=>e.jsx("span",{className:"text-neutral-900 dark:text-neutral-200 text-xs font-semibold",children:t.getValue()})},{header:"Type",accessorKey:"ticketType",cell:t=>e.jsx("span",{className:`px-2 py-0.5 rounded text-[9px] font-bold uppercase tracking-wider border ${t.getValue()==="Platinum"?"bg-slate-100 text-slate-700 border-slate-200":t.getValue()==="Gold"?"bg-amber-50 text-amber-700 border-amber-200":"bg-emerald-50 text-emerald-700 border-emerald-200"}`,children:t.getValue()})},{header:"Seats",accessorKey:"quantity",cell:t=>e.jsx("span",{className:"text-center block text-xs font-medium",children:t.getValue()})},{header:"Amount",accessorKey:"amount",cell:t=>e.jsxs("span",{className:"text-neutral-600 dark:text-neutral-400 text-xs font-mono",children:["₹",t.getValue()]})},{header:"Contact",accessorKey:"contact",cell:t=>e.jsx("span",{className:"text-[10px] text-neutral-500 font-mono",children:t.getValue()})},{header:"Date",accessorKey:"createdAt",cell:t=>e.jsx("span",{className:"text-neutral-400 dark:text-neutral-500 text-[10px] uppercase",children:new Date(t.getValue()).toLocaleDateString(void 0,{month:"short",day:"numeric"})})}],[]),r=N({data:u,columns:v,state:{globalFilter:i},onGlobalFilterChange:x,getCoreRowModel:P(),getFilteredRowModel:V(),getPaginationRowModel:D(),getSortedRowModel:A()}),f=()=>{const t=u.map(s=>({Event:s.eventId?.title||"-",Name:s.name,Ticket_Type:s.ticketType,Quantity:s.quantity,Amount:s.amount,Contact:s.contact,Date:new Date(s.createdAt).toLocaleDateString()})),a=c.json_to_sheet(t),d=c.book_new();c.book_append_sheet(d,a,"Event Members");const k=M(d,{bookType:"xlsx",type:"array"}),w=new Blob([k],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),j=`event_members_${n==="All"?"all":n.replace(/\s+/g,"_").toLowerCase()}.xlsx`;R.saveAs(w,j)};return e.jsxs("div",{className:"max-w-6xl mx-auto pb-20 px-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-neutral-900 dark:text-white tracking-tight",children:"Event Members"}),e.jsx("p",{className:"text-neutral-500 dark:text-neutral-400 text-xs mt-1",children:"Manage all event participants"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full md:w-auto",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:n,onChange:t=>h(t.target.value),className:`w-full sm:w-48 pl-3 pr-8 py-2 rounded-lg bg-white 
                                dark:bg-[#111] border border-neutral-200 dark:border-neutral-800 
                                text-neutral-900 dark:text-white text-xs font-medium focus:outline-none 
                                focus:ring-2 focus:ring-amber-500/20 focus:border-amber-500 transition-all shadow-sm`,children:[e.jsx("option",{value:"All",children:"All Events"}),p.map((t,a)=>e.jsx("option",{value:t,children:t},a))]}),e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-neutral-400",children:e.jsx(m,{size:12,className:"rotate-90"})})]}),e.jsxs("div",{className:"relative flex-1 sm:w-64 group",children:[e.jsx(y,{className:`absolute left-3 top-1/2 -translate-y-1/2 text-neutral-400 
                            group-focus-within:text-amber-500`,size:14}),e.jsx("input",{type:"text",value:i??"",onChange:t=>x(t.target.value),placeholder:"Search members...",className:`w-full pl-8 pr-4 py-2 rounded-lg bg-white dark:bg-[#111] 
                                border border-neutral-200 dark:border-neutral-800 text-neutral-900 
                                dark:text-white placeholder:text-neutral-400 text-xs focus:outline-none 
                                focus:ring-2 focus:ring-amber-500/20 focus:border-amber-500 transition-all shadow-sm`})]}),e.jsxs("button",{onClick:f,className:`flex items-center justify-center gap-2 px-4 py-2 
                        bg-neutral-900 dark:bg-white text-white dark:text-black 
                        rounded-lg font-bold text-xs hover:shadow-lg hover:-translate-y-0.5 
                        active:scale-95 transition-all duration-200`,children:[e.jsx(C,{size:14}),"Export"]})]})]}),e.jsxs("div",{className:`bg-white dark:bg-[#0A0A0A] rounded-xl border border-neutral-200 
                dark:border-neutral-800 shadow-sm overflow-hidden`,children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:r.getHeaderGroups().map(t=>e.jsx("tr",{className:`border-b border-neutral-100 dark:border-neutral-800 
                                        bg-neutral-50/50 dark:bg-neutral-900/30`,children:t.headers.map(a=>e.jsx("th",{className:`px-5 py-2.5 text-[10px] font-bold text-neutral-500 
                                                uppercase tracking-wider cursor-pointer hover:text-neutral-800 
                                                dark:hover:text-white`,onClick:a.column.getToggleSortingHandler(),children:e.jsxs("div",{className:"flex items-center gap-1",children:[b(a.column.columnDef.header,a.getContext()),e.jsx("span",{className:"text-neutral-400",children:{asc:" ↑",desc:" ↓"}[a.column.getIsSorted()]??""})]})},a.id))},t.id))}),e.jsx("tbody",{className:"divide-y divide-neutral-100 dark:divide-neutral-800/50",children:r.getRowModel().rows.map(t=>e.jsx("tr",{className:"hover:bg-neutral-50 dark:hover:bg-neutral-900/40 transition-colors",children:t.getVisibleCells().map(a=>e.jsx("td",{className:"px-5 py-3 text-xs text-neutral-600 dark:text-neutral-300",children:b(a.column.columnDef.cell,a.getContext())},a.id))},t.id))})]})}),e.jsxs("div",{className:`flex items-center justify-between px-5 py-2.5 border-t 
                        border-neutral-200 dark:border-neutral-800 bg-neutral-50/30 dark:bg-neutral-900/20`,children:[e.jsxs("div",{className:"text-[10px] font-medium text-neutral-500",children:["Page"," ",e.jsx("span",{className:"text-neutral-900 dark:text-white font-bold",children:r.getState().pagination.pageIndex+1})," ","of"," ",e.jsx("span",{className:"text-neutral-900 dark:text-white font-bold",children:r.getPageCount()})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>r.previousPage(),disabled:!r.getCanPreviousPage(),className:`p-1 rounded-md bg-white dark:bg-neutral-800 border 
                                border-neutral-200 dark:border-neutral-700 text-neutral-600 
                                dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-neutral-700 
                                disabled:opacity-40 disabled:cursor-not-allowed`,children:e.jsx(S,{size:14})}),e.jsx("button",{onClick:()=>r.nextPage(),disabled:!r.getCanNextPage(),className:`p-1 rounded-md bg-white dark:bg-neutral-800 border 
                                border-neutral-200 dark:border-neutral-700 text-neutral-600 
                                dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-neutral-700 
                                disabled:opacity-40 disabled:cursor-not-allowed`,children:e.jsx(m,{size:14})})]})]})]})]})};export{I as default};
