import{c as b,r as a,j as e,a4 as o,b as x}from"./index-Dsm2NKI-.js";import{T as g}from"./triangle-alert-A1ufvaN2.js";import{S as p}from"./save-BDl75SRI.js";const f=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],k=b("shield-alert",f),v=()=>{const[t,l]=a.useState(!1),[m,u]=a.useState(!0),[i,d]=a.useState(!1),[c,s]=a.useState("");a.useEffect(()=>{(async()=>{try{const n=await x.get("https://founders-sangam.onrender.com/settings/status");n.data.success&&l(n.data.isMaintenanceMode)}catch{console.error("Failed to load settings")}finally{u(!1)}})()},[]);const h=async()=>{d(!0);try{const r=localStorage.getItem("adminToken");await x.post("https://founders-sangam.onrender.com/admin/settings/maintenance",{isMaintenanceMode:t},{headers:{Authorization:`Bearer ${r}`}}),s("Settings updated successfully!"),setTimeout(()=>s(""),3e3)}catch{s("Failed to save settings.")}finally{d(!1)}};return m?e.jsx("div",{className:"p-10 text-center",children:e.jsx(o,{className:"animate-spin mx-auto text-amber-500"})}):e.jsxs("div",{className:"max-w-4xl mx-auto pb-20",children:[e.jsxs("div",{className:"mb-10",children:[e.jsx("h2",{className:"text-3xl font-bold text-neutral-900 dark:text-white tracking-tight",children:"System Settings"}),e.jsx("p",{className:"text-neutral-500 dark:text-neutral-400 mt-1",children:"Manage global application configurations"})]}),e.jsxs("div",{className:`rounded-2xl border transition-all duration-300 overflow-hidden ${t?"bg-red-50/50 border-red-200 dark:bg-red-900/10 dark:border-red-900/30":"bg-white border-neutral-200 dark:bg-[#0A0A0A] dark:border-neutral-800"}`,children:[e.jsx("div",{className:"p-8",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`p-3 rounded-xl ${t?"bg-red-100 text-red-600 dark:bg-red-900/30 dark:text-red-400":"bg-neutral-100 text-neutral-600 dark:bg-neutral-900 dark:text-neutral-400"}`,children:t?e.jsx(g,{size:24}):e.jsx(k,{size:24})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-neutral-900 dark:text-white mb-2",children:"Maintenance Mode"}),e.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 mb-6 max-w-xl",children:'When enabled, the public website will be inaccessible to all users except admins. A generic "Under Maintenance" page will be displayed. Use this only during critical updates.'}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t,onChange:()=>l(!t)}),e.jsx("div",{className:"w-14 h-7 bg-gray-200 peer-focus:outline-none rounded-full peer dark:bg-neutral-800 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-6 after:w-6 after:transition-all dark:border-gray-600 peer-checked:bg-red-500"}),e.jsx("span",{className:"ml-3 text-sm font-medium text-neutral-900 dark:text-white",children:t?"Enabled (Site Down)":"Disabled (Site Live)"})]})})]})]})}),e.jsxs("div",{className:"bg-neutral-50/50 dark:bg-neutral-900/30 px-8 py-4 border-t border-neutral-100 dark:border-neutral-800 flex justify-between items-center",children:[e.jsx("span",{className:`text-xs font-semibold ${c.includes("Failed")?"text-red-500":"text-emerald-500"}`,children:c}),e.jsxs("button",{onClick:h,disabled:i,className:"flex items-center gap-2 px-6 py-2.5 bg-neutral-900 dark:bg-white text-white dark:text-black rounded-lg font-bold text-sm hover:opacity-90 transition-opacity disabled:opacity-50",children:[i?e.jsx(o,{size:16,className:"animate-spin"}):e.jsx(p,{size:16}),"Save Changes"]})]})]})]})};export{v as default};
