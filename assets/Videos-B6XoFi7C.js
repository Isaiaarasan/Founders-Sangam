import{c as I,Q as S,T as k,W as A,r as l,Y as M,Z as E,_ as U,$ as z,a0 as v,a1 as T,a2 as D,m as C,j as t,a3 as O,b as j,E as P}from"./index-Dsm2NKI-.js";import{E as G}from"./external-link-B5JC2MCO.js";import{T as F}from"./trash-2-BucIhIMf.js";const $=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],Y=I("grip-vertical",$);function B(...e){const n=!Array.isArray(e[0]),s=n?0:-1,o=e[0+s],a=e[1+s],i=e[2+s],c=e[3+s],x=S(a,i,c);return n?x(o):x}function w(e){const n=k(()=>A(e)),{isStatic:s}=l.useContext(M);if(s){const[,o]=l.useState(e);l.useEffect(()=>n.on("change",o),[])}return n}function R(e,n){const s=w(n()),o=()=>s.set(n());return o(),E(()=>{const a=()=>U.preRender(o,!1,!0),i=e.map(c=>c.on("change",a));return()=>{i.forEach(c=>c()),z(o)}}),s}function H(e){v.current=[],e();const n=R(v.current,e);return v.current=void 0,n}function K(e,n,s,o){if(typeof e=="function")return H(e);const a=typeof n=="function"?n:B(n,s,o);return Array.isArray(e)?N(e,a):N([e],([i])=>a(i))}function N(e,n){const s=k(()=>[]);return R(e,()=>{s.length=0;const o=e.length;for(let a=0;a<o;a++)s[a]=e[a].get();return n(s)})}const L=l.createContext(null);function Q(e,n,s,o){if(!o)return e;const a=e.findIndex(f=>f.value===n);if(a===-1)return e;const i=o>0?1:-1,c=e[a+i];if(!c)return e;const x=e[a],u=c.layout,m=T(u.min,u.max,.5);return i===1&&x.layout.max+s>m||i===-1&&x.layout.min+s<m?D(e,a,a+i):e}function W({children:e,as:n="ul",axis:s="y",onReorder:o,values:a,...i},c){const x=k(()=>C[n]),u=[],m=l.useRef(!1),f={axis:s,registerItem:(b,h)=>{const p=u.findIndex(r=>b===r.value);p!==-1?u[p].layout=h[s]:u.push({value:b,layout:h[s]}),u.sort(q)},updateOrder:(b,h,p)=>{if(m.current)return;const r=Q(u,b,h,p);u!==r&&(m.current=!0,o(r.map(_).filter(d=>a.indexOf(d)!==-1)))}};return l.useEffect(()=>{m.current=!1}),t.jsx(x,{...i,ref:c,ignoreStrict:!0,children:t.jsx(L.Provider,{value:f,children:e})})}const Z=l.forwardRef(W);function _(e){return e.value}function q(e,n){return e.layout.min-n.layout.min}function V(e,n=0){return O(e)?e:w(n)}function J({children:e,style:n={},value:s,as:o="li",onDrag:a,layout:i=!0,...c},x){const u=k(()=>C[o]),m=l.useContext(L),f={x:V(n.x),y:V(n.y)},b=K([f.x,f.y],([d,g])=>d||g?1:"unset"),{axis:h,registerItem:p,updateOrder:r}=m;return t.jsx(u,{drag:h,...c,dragSnapToOrigin:!0,style:{...n,x:f.x,y:f.y,zIndex:b},layout:i,onDrag:(d,g)=>{const{velocity:y}=g;y[h]&&r(s,f[h].get(),y[h]),a&&a(d,g)},onLayoutMeasure:d=>p(s,d),ref:x,ignoreStrict:!0,children:e})}const X=l.forwardRef(J),ne=()=>{const[e,n]=l.useState([]),[s,o]=l.useState(""),[a,i]=l.useState(!1),[c,x]=l.useState(!1);l.useEffect(()=>{u()},[]);const u=async()=>{i(!0);try{const r=await j.get("https://founders-sangam.onrender.com/content/videos");r.data.success&&r.data.content&&Array.isArray(r.data.content)&&n(r.data.content)}catch{console.error("Failed to fetch videos")}finally{i(!1)}},m=async r=>{x(!0);try{const d=localStorage.getItem("adminToken");await j.post("https://founders-sangam.onrender.com/content/videos",{content:r},{headers:{Authorization:`Bearer ${d}`}})}catch{console.error("Failed to save videos"),alert("Failed to save videos")}finally{x(!1)}},f=()=>{if(!s.trim()){alert("Please enter a video URL");return}const r=[...e,s.trim()];n(r),m(r),o("")},b=r=>{const d=e.filter((g,y)=>y!==r);n(d),m(d)},h=r=>{n(r),m(r)},p=r=>r.includes("cloudinary.com")?"Cloudinary":r.includes(".mp4")||r.includes(".webm")||r.includes(".mov")?"Direct Video":r.includes("cdninstagram.com")||r.includes("fbcdn.net")?"Instagram CDN":"Unknown";return t.jsxs("div",{className:"max-w-4xl mx-auto pb-20 px-4",children:[t.jsxs("div",{className:"mb-8",children:[t.jsx("h2",{className:"text-3xl font-bold text-neutral-900 dark:text-white tracking-tight",children:"Video Management"}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("input",{type:"text",value:s,onChange:r=>o(r.target.value),onKeyPress:r=>r.key==="Enter"&&f(),placeholder:"Paste Cloudinary URL or direct video URL",className:"flex-1 px-4 py-3 rounded-lg bg-neutral-50 dark:bg-[#111] border border-neutral-200 dark:border-neutral-800 text-neutral-900 dark:text-white placeholder:text-neutral-400 text-sm focus:outline-none focus:ring-2 focus:ring-amber-500/20 focus:border-amber-500 transition-all"}),t.jsxs("button",{onClick:f,disabled:c,className:"flex items-center gap-2 px-6 py-3 bg-neutral-900 dark:bg-white text-white dark:text-black rounded-lg font-bold text-sm hover:opacity-90 disabled:opacity-50 transition-all",children:[t.jsx(P,{size:18}),"Add"]})]}),t.jsxs("div",{className:"mt-4 p-4 bg-blue-50 dark:bg-blue-900/10 border border-blue-200 dark:border-blue-800 rounded-lg",children:[t.jsx("h4",{className:"text-sm font-bold text-blue-900 dark:text-blue-300 mb-2",children:"ðŸ“ How to Get Cloudinary Video Link"}),t.jsxs("ol",{className:"text-xs text-blue-800 dark:text-blue-400 space-y-1 list-decimal list-inside",children:[t.jsxs("li",{children:["Go to ",t.jsx("a",{href:"https://cloudinary.com",target:"_blank",rel:"noopener noreferrer",className:"underline hover:text-blue-600",children:"cloudinary.com"})," and sign in"]}),t.jsx("li",{children:'Click "Media Library" â†’ "Upload" button'}),t.jsx("li",{children:"Select your video file (MP4, MOV, etc.)"}),t.jsx("li",{children:"Once uploaded, click on the Assets tab"}),t.jsx("li",{children:'Select the video file and copy the URL from the "Link" section'}),t.jsx("li",{children:"Paste the URL in the input field above"})]}),t.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-400 mt-3 italic",children:"ðŸ’¡ Tip: You can use either the full Cloudinary URL!"})]})]}),t.jsxs("div",{className:"bg-white dark:bg-[#0A0A0A] rounded-xl border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[t.jsxs("div",{className:"p-6 border-b border-neutral-200 dark:border-neutral-800",children:[t.jsxs("h3",{className:"text-lg font-bold text-neutral-900 dark:text-white",children:["Current Videos (",e.length,")"]}),t.jsx("p",{className:"text-xs text-neutral-500 mt-1",children:"Drag to reorder"})]}),a?t.jsxs("div",{className:"p-12 text-center",children:[t.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mx-auto mb-3"}),t.jsx("p",{className:"text-neutral-500 text-sm",children:"Loading videos..."})]}):e.length===0?t.jsx("div",{className:"p-12 text-center",children:t.jsx("p",{className:"text-neutral-500",children:"No videos added yet. Add your first video above!"})}):t.jsx(Z,{axis:"y",values:e,onReorder:h,className:"divide-y divide-neutral-200 dark:divide-neutral-800",children:e.map((r,d)=>t.jsx(X,{value:r,className:"p-4 hover:bg-neutral-50 dark:hover:bg-neutral-900/40 transition-colors cursor-move",children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(Y,{size:20,className:"text-neutral-400 flex-shrink-0"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold uppercase ${p(r)==="Cloudinary"?"bg-indigo-100 text-indigo-700 dark:bg-indigo-900/20 dark:text-indigo-400":p(r)==="Direct Video"?"bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400":p(r)==="Instagram CDN"?"bg-pink-100 text-pink-700 dark:bg-pink-900/20 dark:text-pink-400":"bg-neutral-100 text-neutral-700 dark:bg-neutral-800 dark:text-neutral-400"}`,children:p(r)}),t.jsxs("span",{className:"text-xs text-neutral-500",children:["Video ",d+1]})]}),t.jsx("p",{className:"text-sm text-neutral-900 dark:text-white font-mono truncate",children:r})]}),t.jsx("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"p-2 hover:bg-neutral-200 dark:hover:bg-neutral-800 rounded-lg transition-colors text-neutral-600 dark:text-neutral-400",children:t.jsx(G,{size:16})}),t.jsx("button",{onClick:()=>b(d),disabled:c,className:"p-2 hover:bg-red-100 dark:hover:bg-red-900/20 rounded-lg transition-colors text-red-500 disabled:opacity-50",children:t.jsx(F,{size:16})})]})},r))})]}),c&&t.jsxs("div",{className:"fixed bottom-4 right-4 bg-neutral-900 dark:bg-white text-white dark:text-black px-4 py-2 rounded-lg shadow-lg flex items-center gap-2",children:[t.jsx("div",{className:"w-4 h-4 border-2 border-white dark:border-black border-t-transparent rounded-full animate-spin"}),t.jsx("span",{className:"text-sm font-medium",children:"Saving..."})]})]})};export{ne as default};
